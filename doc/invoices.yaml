paths:
  invoices:
    get:
      tags:
        - invoice
      summary: Get all invoices
      description: Returns an array of all invoices which optionally matches to some query.
      parameters:
        - in: query
          name: query
          type: string
          description: The current version of Acc doesn't support searching in specific parameters it uses a fuzzy search over all advisable fields and returns any matching customers.
        - in: query
          name: identifier
          type: string
          description: Search for customers with a matching identifier. This returns only exact matching elements (no fuzzy search whatsoever).
      responses:
        200:
          description: All matching Invoices
          content:
            application/json:
              schema:
                $ref: '#/schemas/invoices'
        500:
          description: Internal Server Error
  invoiceById:
    parameters:
      - $ref: 'common.yaml#/idParam'
        description: Unique ID of the requested Invoice
    get:
      tags:
        - invoice
      summary: Get a Invoice by ID
      responses:
        200:
          description: A Invoice
          content:
            application/json:
              schema:
                $ref: '#/schemas/invoice'
        404:
          description: No Invoice with specified ID found.
        500:
          description: Internal Server Error
    put:
      tags:
        - invoice
      summary: Update a Invoice
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/schemas/invoiceBase'
      responses:
        200:
          description: Updated successfully.
        404:
          description: No Invoice with specified ID found.
        500:
          description: Internal Server Error
    post: 
      tags:
        - invoice
      summary: Add a Invoice
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/schemas/invoiceBase'
      responses:
        200:
          description: Added successfully.
        404:
          description: Adding Invoice failed.
        500:
          description: Internal Server Error
    delete:
      tags:
        - invoice
      summary: Remove a Invoice
      response:
        200:
          description: Invoice deleted successfully.
        404:
          description: No Invoice with specified ID found.
        500:
          description: Internal Server Error

schemas:
  invoices:
    type: array
    description: A collection of multiple Invoices
    items:
      $ref: '#/schemas/invoice'
  invoiceBase:
    type: object
    description: A Invoice sent to a customer.
    properties:
      identifier:
        $ref: 'common.yaml#/identifier/invoice'
      name:
        type: string
        description: Describes the Invoice.
        example: Your Invoice
      amount:
        description: Outstanding amount.
        $ref: 'common.yaml#/money'
      path:
        type: string
        description: The full path to the business record document (PDF or PNG).
        example: /path/to/invoice.pdf
      revoked:
        type: boolean
        description: Revoked Invoices are disabled an no longer taken into account.
      customerId:
        type: string
        description: Refers to the customer the Invoice was sent to.
        example: c-17
      sendDate:
        $ref: 'common.yaml#/date'
        description: Day the Invoice was sent to the customer.
      dateOfSettlement:
        $ref: 'common.yaml#/date'
        description: The date the customer paid the outstanding amount.
      settlementTransactionId:
        type: string
        description: Refers to a possible bank transaction which settled the Invoice for the company.
        example: t-115
      projectId:
        type: string
        description: Refers to the associated project.
  invoice:
    allOf:
      - type: object
        properties:
          id:
            $ref: 'common.yaml#/id'
      - $ref: '#/schemas/invoiceBase'
    
